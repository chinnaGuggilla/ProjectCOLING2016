(window.hawkWebpackJsonP=window.hawkWebpackJsonP||[]).push([[42],{116:function(e,t,a){e.exports={default:a(117),__esModule:!0}},117:function(e,t,a){a(118),e.exports=a(0).Object.values},118:function(e,t,a){var r=a(5),n=a(119)(!1);r(r.S,"Object",{values:function(e){return n(e)}})},119:function(e,t,a){var r=a(22),n=a(19),l=a(39).f;e.exports=function(e){return function(t){for(var a,s=n(t),i=r(s),u=i.length,o=0,c=[];u>o;)l.call(s,a=i[o++])&&c.push(e?[a,s[a]]:s[a]);return c}}},1275:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(a(238)),n=a(428),l=u(a(1276)),s=a(23),i=u(a(590));function u(e){return e&&e.__esModule?e:{default:e}}t.default=function(){return r.default.createElement(n.Consumer,null,function(e){var t=e.toggleClick,a=e.toggleStatus,n=e.data,u=e.models;return n=n||{},r.default.createElement("div",{className:l.default.container,onClick:t},r.default.createElement("span",{className:l.default.title},(0,s.translate)("reviewToggleTitle",[(0,i.default)(n,u)])),a?r.default.createElement("span",{className:l.default.icon},"▲"):r.default.createElement("span",{className:l.default.icon},"▼"))})}},1276:function(e,t,a){e.exports={container:"hawk-review-toggle-container",title:"hawk-review-toggle-title",icon:"hawk-review-toggle-icon"}},1278:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.getGamePlatformName=function(e){return e.hasOwnProperty("filter_label[game_platform]")?"filter_label[game_platform]":"filter_label[text_game_platform]"};t.getGamePlatforms=function(e){var t=r(e);return e[t]?e[t].split(","):["PS4","XBox One","Switch","PC","null"]},t.getFilteredGamePlatforms=function(e){var t=r(e);return e[t]?e[t].split(","):[]},t.checkGamePlatformsEnabled=function(e,t){if(0===t.length)return!0;var a=!1;return e.every(function(e){return!(a=t.indexOf(e)>=0)}),a}},1279:function(e,t,a){e.exports={container:"hawk-review-container","dotw-mobile":"hawk-review-dotw-mobile","dotwSearch-mobile":"hawk-review-dotwSearch-mobile"}},425:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=f(a(7)),n=f(a(151)),l=f(a(137)),s=f(a(138)),i=f(a(152)),u=f(a(153)),o=f(a(238)),c=f(a(428)),d=f(a(589));function f(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(){return(0,l.default)(this,t),(0,i.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,s.default)(t,[{key:"getChildren",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this,a=arguments[1],r=arguments[2],n=function(){switch(e.value){case"vpn":return t.getVPNComponent(a);case"subscriptions":return t.getSubscriptionsComponent(a);case"contracts":return t.getContractsComponent(a);default:return t.getRetailComponent(a)}}();return o.default.createElement(o.default.Fragment,null,o.default.createElement(o.default.Suspense,{fallback:o.default.createElement(d.default,{site:r})},o.default.createElement(n,null)))}},{key:"getVPNComponent",value:function(e){switch(e){case"peacock":return o.default.lazy(function(){return a.e(61).then(a.t.bind(null,1463,7))});case"simple":return o.default.lazy(function(){return a.e(62).then(a.t.bind(null,1473,7))});default:return null}}},{key:"getSubscriptionsComponent",value:function(e){switch(e){case"peacock":return o.default.lazy(function(){return a.e(59).then(a.t.bind(null,1483,7))});case"simple":return o.default.lazy(function(){return a.e(60).then(a.t.bind(null,1494,7))});default:return null}}},{key:"getContractsComponent",value:function(e){switch(e){case"modelName":return o.default.lazy(function(){return a.e(43).then(a.t.bind(null,1504,7))});case"pocket":return o.default.lazy(function(){return a.e(44).then(a.t.bind(null,1511,7))});case"product-name":return o.default.lazy(function(){return a.e(45).then(a.t.bind(null,1534,7))});case"simple":return o.default.lazy(function(){return a.e(46).then(a.t.bind(null,1541,7))});default:return null}}},{key:"getRetailComponent",value:function(e){switch(e){case"dotw":case"dotwSearch":return o.default.lazy(function(){return a.e(47).then(a.t.bind(null,1548,7))});case"filterImage":return o.default.lazy(function(){return a.e(48).then(a.t.bind(null,1579,7))});case"gamePlatform":return o.default.lazy(function(){return a.e(49).then(a.t.bind(null,1586,7))});case"image":case"blanc":case"chamonix":case"alpine":return o.default.lazy(function(){return a.e(50).then(a.t.bind(null,1604,7))});case"labels":return o.default.lazy(function(){return a.e(51).then(a.t.bind(null,1611,7))});case"modelName":return o.default.lazy(function(){return a.e(52).then(a.t.bind(null,1618,7))});case"peacock":return o.default.lazy(function(){return a.e(53).then(a.t.bind(null,1625,7))});case"pocket":return o.default.lazy(function(){return a.e(54).then(a.t.bind(null,1642,7))});case"product-name":return o.default.lazy(function(){return a.e(55).then(a.t.bind(null,1665,7))});case"shipping":return o.default.lazy(function(){return a.e(56).then(a.t.bind(null,1672,7))});case"simple":return o.default.lazy(function(){return a.e(57).then(a.t.bind(null,1679,7))});case"switcher":return o.default.lazy(function(){return a.e(58).then(a.t.bind(null,1686,7))});default:return null}}},{key:"render",value:function(){return o.default.createElement(c.default,(0,r.default)({},this.props,{getChildren:this.getChildren.bind(this)}))}}]),t}(o.default.Component);t.default=p},426:function(e,t,a){e.exports=a(576)()},428:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Consumer=t.Provider=void 0;var r=x(a(102)),n=x(a(9)),l=x(a(3)),s=x(a(4)),i=x(a(74)),u=x(a(7)),o=x(a(151)),c=x(a(137)),d=x(a(138)),f=x(a(152)),p=x(a(153)),h=x(a(426)),v=x(a(238)),g=x(a(1275)),m=a(23),y=x(a(180)),b=x(a(513)),w=x(a(794)),_=a(121),k=x(a(867)),S=a(1278),P=x(a(590)),T=x(a(1279));function x(e){return e&&e.__esModule?e:{default:e}}var D=function(e){function t(e){(0,c.default)(this,t);var a=(0,f.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e)),r=a.getTabs(e.data),n=r.find(function(e){return"gamePlatform"===e.type}),l=(0,_.getCookie)("hawk-review-widget-tab"),s=function(){if(l&&n){var e=(r||[]).find(function(e){return e.value===l});if(e)return e}return r&&r[0]?r[0]:{}}(),d={},p={},h=(0,P.default)(e.data,e.models);r.forEach(function(e){d[e.value]=(0,u.default)({},a.getDefaultParams(h),{offset:0}),p[e.value]=a.getDefaultFilters(h)});var v=a.getDefaultData(r,s),g=a.getDisplayType(r,s);return e.setAnalyticsAttribute&&e.setAnalyticsAttribute("displayType",g),a.state={tabs:r,activeTab:s,toggleOpen:"undefined"!=typeof window&&window.innerWidth>575,loadTime:(0,y.default)(),data:v,params:d,defaultRows:e.params?e.params.rows:0,loading:!1,hasGamePlatformTabs:n,displayType:g,selectedFilters:p,selectedFilter:"",selectedSwitcherItem:"data",switcherItems:[(0,m.translate)("switcherData"),(0,m.translate)("switcherTexts"),(0,m.translate)("switcherMinutes")],filters:(0,i.default)({},s.value,(e.data||{}).filters),Component:e.getChildren(s,g,e.params.site)},a}return(0,p.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){var e=(0,s.default)(l.default.mark(function e(){var t,a,r,n,s;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.startViewportTracking,a=this.state,r=a.hasGamePlatformTabs,n=a.params,s=a.activeTab,t&&t(),!r){e.next=9;break}return e.next=6,this.getData(n[s.value],{activeTab:s});case 6:this.sendAppeared(),e.next=10;break;case 9:this.sendAppeared();case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.sendViewedEvent,a=e.sendAnalytics;t&&a&&a({type:"viewed"})}},{key:"getDisplayType",value:function(e,t){e=e||[],t=t||{};var a=this.props.displayType;if(e.find(function(e){return"gamePlatform"===e.type}))return"gamePlatform";if((t.displayTypes||[]).indexOf(a)>=0)return a;switch(t.value){case"vpn":case"subscriptions":return"peacock";case"contracts":return"modelName";default:return"image"}}},{key:"getDefaultData",value:function(e,t){var a={};return e.forEach(function(e){return a[e.value]={}}),(0,u.default)({},a,(0,i.default)({},t.value,(0,u.default)({},this.props.data)))}},{key:"getDefaultFilters",value:function(e){var t=this.props.params,a={};for(var r in t)r.indexOf("filter")>=0&&(a[r]=t[r]);return(0,u.default)({},a,{offset:"",model_name:e,filter_monthly_cost:"",filter_upfront:""})}},{key:"getDefaultParams",value:function(e){var t=this.props.params;return(0,u.default)({},t,{model_name:e})}},{key:"sendAppeared",value:function(){var e=this.props.sendAnalytics,t=this.state.loadTime;e&&e({gaData:{metric1:t},type:"appeared"})}},{key:"getDealData",value:function(){var e=this.props.getDealData,t=this.state,a=t.data,r=t.activeTab;return e&&r?e(a[r.value]):{}}},{key:"getTabs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.props,a=t.retailTabs,r=t.gamePlatformTabs,n=t.params,l=t.data,s=[],u=e.counts||{},o=["shipping","peacock","product-name","simple","blanc","chamonix","alpine","labels","switcher","modelName","filterImage","dotw","dotwSearch"];if(l&&l.counts&&l.counts.contracts>0&&o.push("pocket"),u.vpn>0)s.push({value:"vpn",label:(0,m.translate)("reviewVPNTabLabel"),params:{filter_product_types:"vpn"},pageSize:3,displayTypes:["simple"]});else if(u.subscriptions>0)s.push({value:"subscriptions",label:(0,m.translate)("reviewSubscriptionsTabLabel"),params:{filter_product_types:"subscriptions"},pageSize:3,displayTypes:["simple"]});else if(u.contracts>0)s.push({value:"contracts",label:(0,m.translate)("reviewContractsTabLabel"),params:{filter_product_types:"contracts"},pageSize:3,displayTypes:["product-name","simple","pocket"]}),u.deals>0&&s.push({value:"deals",label:(0,m.translate)("reviewHandsetsTabLabel"),params:{filter_product_types:"deals"},category:"retail",pageSize:4,displayTypes:o});else if((u.xbox_deals>0||u.playstation_deals>0||u.nintendo_deals>0||u.pc_deals>0)&&r){var c=(0,S.getGamePlatformName)(n),d=(0,S.getGamePlatforms)(n),f=(0,S.getFilteredGamePlatforms)(n);d.forEach(function(e){"PS4"===e&&u.playstation_deals>0&&(0,S.checkGamePlatformsEnabled)(["PS4"],f)&&s.push({value:"playstation",label:"PlayStation 4",countProperty:"deals",params:(0,i.default)({filter_product_types:"deals"},c,"PS4"),category:"retail",type:"gamePlatform",pageSize:4}),"XBox One"===e&&u.xbox_deals>0&&(0,S.checkGamePlatformsEnabled)(["XBox One"],f)&&s.push({value:"xbox",label:"Xbox One",countProperty:"deals",params:(0,i.default)({filter_product_types:"deals"},c,"XBox One"),category:"retail",type:"gamePlatform",pageSize:4}),"Switch"===e&&u.nintendo_deals>0&&(0,S.checkGamePlatformsEnabled)(["Switch"],f)&&s.push({value:"nintendo",label:"Nintendo Switch",countProperty:"deals",params:(0,i.default)({filter_product_types:"deals"},c,"Switch"),category:"retail",type:"gamePlatform",pageSize:4}),"PC"===e&&u.pc_deals>0&&(0,S.checkGamePlatformsEnabled)(["PC"],f)&&s.push({value:"pc",label:"PC",countProperty:"deals",params:(0,i.default)({filter_product_types:"deals"},c,"PC"),category:"retail",type:"gamePlatform",pageSize:4});var t=["XBox 360","PS3","PS Vita","Wii U","PSP","3DS","Mac","null"];t.indexOf(e)>=0&&u.other_platform_deals>0&&(0,S.checkGamePlatformsEnabled)(t,f)&&!s.find(function(e){return"otherPlatform"===e.value})&&s.push({value:"otherPlatform",label:(0,m.translate)("reviewOtherPlatformTabLabel"),countProperty:"deals",params:(0,i.default)({filter_product_types:"deals"},c,f.length>0?f.filter(function(e){return["XBox 360","PS3","PS Vita","Wii U","PSP","3DS","Mac","null"].indexOf(e)>=0}).join(","):"XBox 360,PS3,PS Vita,Wii U,PSP,3DS,Mac,null"),category:"retail",type:"gamePlatform",pageSize:4})})}else u.deals>0&&s.push({value:"deals",label:(0,m.translate)("reviewRetailTabLabel"),params:{filter_product_types:"deals"},category:"retail",pageSize:4,displayTypes:o}),a&&(u.amazon_deals>0&&s.push({value:"amazon",label:(0,m.translate)("reviewAmazonTabLabel"),countProperty:"amazon_deals",params:{filter_product_types:"amazon_deals"},category:"retail",pageSize:4,displayTypes:o}),u.ebay_deals>0&&s.push({value:"ebay",label:(0,m.translate)("reviewEbayTabLabel"),countProperty:"ebay_deals",params:{filter_product_types:"ebay_deals"},category:"retail",pageSize:4,displayTypes:o}));return s}},{key:"changeTab",value:function(){var e=(0,s.default)(l.default.mark(function e(t){var a,r,n,s,i,u,o,c,d,f,p,h,v;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.props,r=a.getChildren,n=a.setAnalyticsAttribute,s=a.sendAnalytics,i=this.state,u=i.tabs,o=i.params,c=i.data,d=(0,b.default)(t.target),f=d.value,p=t.target.value||f,h=u.find(function(e){return e.value===p}),(0,_.setCookie)("hawk-review-widget-tab",h.value),!c[h.value]||c[h.value].offers){e.next=9;break}return e.next=9,this.getData(o[h.value],{activeTab:h});case 9:return v=this.getDisplayType(u,h),this.setState({activeTab:h,displayType:v,Component:r(h,v,o[h.value].site)}),e.next=13,this.checkState("activeTab",h);case 13:n("displayType",v),this.sendAppeared(),s&&s({gaData:{label:h.label,dimension115:"Tab changed"},prefix:"Click from"});case 16:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"clickToggle",value:function(){this.setState({toggleOpen:!this.state.toggleOpen})}},{key:"getData",value:function(e,t){var a,r=this;return t=t||{},new n.default((a=(0,s.default)(l.default.mark(function a(n){var s,o,c,d,f,p,h,v,g,m,y,b,w,_,k,S,P,T,x;return l.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:for(y in s=r.props,o=s.endpoint,c=s.getJSON,d=s.getChildren,f=r.state.data,h=(p=t).appendDeals,v=p.activeTab,g=p.filters,m=p.modelChanged,v=v||r.state.activeTab||{},g=g||r.state.filters,e)e[y]||delete e[y];if(r.setState({loading:!0}),!c){a.next=22;break}return a.prev=8,a.next=11,c(o,(0,u.default)({},e,m?{}:v.params));case 11:b=a.sent,w=b.body,_=w.widget,k=(0,u.default)({},f),_&&_.data&&(S=_.data.offers,!g[v.value]&&_.data.filters&&(0,u.default)(g,(0,i.default)({},v.value,_.data.filters)),m?(void 0,l=r.getTabs(_.data),P=l&&l.length>0?l:[{value:"empty"}],v=P&&P[0]?P[0]:{},k={},T={},x={},P.forEach(function(t){T[t.value]=(0,u.default)({},e,t.params),x[t.value]=g,k[t.value]={}}),(0,u.default)(k[v.value],_.data,{offers:h?k[v.value].offers.concat(S):S}),r.setState({loading:!1,params:T,selectedFilters:x,data:k,tabs:P,activeTab:v,filters:g,Component:d(v,r.getDisplayType(P,v),T[v.value].site)})):((0,u.default)(k[v.value],_.data,{offers:h?k[v.value].offers.concat(S):S}),r.setState({loading:!1,params:(0,u.default)({},r.state.params,(0,i.default)({},v.value,e)),data:k,filters:g}))),n(k),a.next=22;break;case 19:a.prev=19,a.t0=a.catch(8),r.setState({loading:!1});case 22:case"end":return a.stop()}var l},a,r,[[8,19]])})),function(e){return a.apply(this,arguments)}))}},{key:"loadMoreDeals",value:function(){var e=(0,s.default)(l.default.mark(function e(){var t,a,r,n,s,i;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.sendAnalytics,a=this.state,r=a.params,n=a.activeTab,s=(0,u.default)({},r[n.value],{offset:parseInt(r[n.value].offset||0)+parseInt(r[n.value].rows||n.pageSize)}),this.setState({loading:!0}),e.next=6,this.getData(s,{appendDeals:!0});case 6:return i=e.sent,e.next=9,this.checkState("data",i);case 9:t&&t({gaData:{dimension115:"Load more"},prefix:"Click from",offset:s.offset});case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"resetDeals",value:function(){var e=(0,s.default)(l.default.mark(function e(){var t,a,r,n,s,o;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.params,r=t.sendAnalytics,n=this.state,s=n.data,o=n.activeTab,this.setState({data:(0,u.default)(s,(0,i.default)({},o.value,(0,u.default)(s[o.value],{offers:s[o.value].offers.slice(0,this.getDefaultRows())}))),params:(0,u.default)({},this.state.params,(0,i.default)({},o.value,a))}),e.next=5,this.checkState("data",s);case 5:r&&r({gaData:{dimension115:"Reset deals"},prefix:"Click from"});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"checkState",value:function(e,t){var a=this;return new n.default(function(n){var l=0,s=setInterval(function(){(0,r.default)(a.state[e])===(0,r.default)(t)?(clearInterval(s),n()):l>20&&clearInterval(s),l++},300)})}},{key:"getDefaultRows",value:function(){var e=this.state,t=e.activeTab,a=e.params;return a&&a[t.value]&&a[t.value].rows?a[t.value].rows:t&&"contracts"===t.value?3:4}},{key:"toggleFilterOptions",value:function(e){var t=(0,b.default)(e.target).type;this.setState({selectedFilter:t===this.state.selectedFilter?"":t})}},{key:"changeFilter",value:function(){var e=(0,s.default)(l.default.mark(function e(t){var a,r,n,s,o,c,d,f,p;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.props.sendAnalytics,r=this.state,n=r.params,s=r.selectedFilters,o=r.activeTab,c=r.displayType,d=(0,b.default)(t.target),f=d.filterKey,p=(0,w.default)(t.target,s[o.value]),n[o.value][f]=function(){switch(c){case"labels":case"switcher":case"filterImage":return""===p?p:p+",null";default:return p}}(),delete n[o.value].offset,this.setState({selectedFilters:(0,u.default)({},s,(0,i.default)({},o.value,(0,u.default)({},s[o.value],(0,i.default)({},f,p))))}),e.next=9,this.getData(n[o.value],{});case 9:a&&a({gaData:{dimension115:"Filter"},prefix:"Click from"});case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"changeRangeFilter",value:function(e,t){var a=this,r=this.props.sendAnalytics,n=this.state,o=n.selectedFilters,c=n.params,d=n.activeTab;this.setState({selectedFilters:(0,u.default)({},o,(0,i.default)({},d.value,(0,u.default)({},o[d.value],(0,i.default)({},e,String(t.value)))))}),setTimeout((0,s.default)(l.default.mark(function n(){var s;return l.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(String(t.value)!==a.state.selectedFilters[d.value][e]){n.next=6;break}return delete(s=(0,u.default)({},c[d.value],(0,i.default)({},e,String(t.value)))).offset,n.next=5,a.getData(s);case 5:r&&r({gaData:{label:e+":"+t.value,dimension115:"Filter"},prefix:"Click from"});case 6:case"end":return n.stop()}},n,a)})),200)}},{key:"changeSort",value:function(){var e=(0,s.default)(l.default.mark(function e(t){var a,r,n,s,o,c,d;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.props.sendAnalytics,r=this.state,n=r.selectedFilters,s=r.params,o=r.activeTab,!(c=this.getSortOptions().find(function(e){return e.value===t.target.value}))){e.next=10;break}return this.setState({selectedFilters:(0,u.default)({},n,(0,i.default)({},o.value,(0,u.default)({},n[o.value],{sort:c.value})))}),delete(d=(0,u.default)({},s[o.value],{sort:c.filterValue,desc:c.desc})).offset,e.next=9,this.getData(d);case 9:a&&a({gaData:{label:c.label,dimension115:"Sort"},prefix:"Click from"});case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getSortOptions",value:function(){switch(this.state.activeTab.value){case"contracts":return[{value:"recommended",filterValue:"",label:(0,m.translate)("reviewSortRecommended"),desc:""},{value:"data_desc",filterValue:"data",label:(0,m.translate)("reviewSortDataDesc"),desc:"1"},{value:"data",filterValue:"data",label:(0,m.translate)("reviewSortDataAsc"),desc:"0"},{value:"monthly_cost_desc",filterValue:"monthly_cost",label:(0,m.translate)("reviewSortMonthlyCostDesc"),desc:"1"},{value:"monthly_cost",filterValue:"monthly_cost",label:(0,m.translate)("reviewSortMonthlyCostAsc"),desc:"0"},{value:"upfront_cost_desc",filterValue:"upfront_cost",label:(0,m.translate)("reviewSortPriceDesc"),desc:"1"},{value:"upfront_cost",filterValue:"upfront_cost",label:(0,m.translate)("reviewSortPriceAsc"),desc:"0"}];default:return[{value:"recommended",filterValue:"",label:(0,m.translate)("reviewSortRecommended"),desc:""},{value:"upfront_cost_desc",filterValue:"upfront_cost",label:(0,m.translate)("reviewSortUpfrontCostDesc"),desc:"1"},{value:"upfront_cost",filterValue:"upfront_cost",label:(0,m.translate)("reviewSortUpfrontCostAsc"),desc:"0"}]}}},{key:"updateInputValue",value:function(e){var t=this.state,a=t.selectedFilters,r=t.activeTab,n=(0,b.default)(e.target).type;this.setState({selectedFilters:(0,u.default)({},a,(0,i.default)({},r.value,(0,u.default)({},a[r.value],(0,i.default)({},n,e.target.value))))})}},{key:"useInputValue",value:function(){var e=(0,s.default)(l.default.mark(function e(t){var a,r,n,s,i,o;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.props.sendAnalytics,r=this.state.tabs,n=(0,b.default)(t.target),s=n.value,i={},o=this.getDefaultFilters(s),r.forEach(function(e){return i[e.value]=(0,u.default)({},o,e.params)}),this.setState({selectedFilters:i,filters:{}}),e.next=9,this.getData(this.getDefaultParams(s),{filters:o,modelChanged:!0});case 9:a&&a({gaData:{label:s,dimension115:"Model search"},prefix:"Click from"});case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getModelSuggestions",value:function(e,t){var a=this,r=this.props,l=r.endpoint,s=r.getJSON;return new n.default(function(r){setTimeout(function(){var n=a.state,i=n.selectedFilters,u=n.activeTab;e===i[u.value].model_name?s&&s(l.replace("widget.php","suggestions.php"),{prefix:e}).then(function(e){var t=e.body.models;r((t||[]).map(function(e){return{id:e.id,label:e.brand?e.brand+" "+e.name:e.name}}))}):r(t)},1e3)})}},{key:"updateModelSuggestionsCallback",value:function(){var e=(0,s.default)(l.default.mark(function e(t){var a,r,n,s;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.props.sendAnalytics,r=this.state.tabs,n={},s=this.getDefaultFilters(t.label),r.forEach(function(e){return n[e.value]=s}),this.setState({selectedFilters:n,filters:{}}),e.next=8,this.getData(this.getDefaultParams(t.label),{filters:s,modelChanged:!0});case 8:a&&a({gaData:{label:t.label,dimension115:"Model suggestion"},prefix:"Click from"});case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"scrollLeft",value:function(){var e=this.state,t=e.switcherItems,a=e.selectedSwitcherItem,r=(0,k.default)("left",t,a);this.setState({selectedSwitcherItem:r})}},{key:"scrollRight",value:function(){var e=this.state,t=e.switcherItems,a=e.selectedSwitcherItem,r=(0,k.default)("right",t,a);this.setState({selectedSwitcherItem:r})}},{key:"render",value:function(){var e=this,t=this.props,a=t.showLink,r=t.width,n=t.showToggle,l=t.editorial,s=t.widgetTitle,i=t.showWidgetTitle,u=t.sendAnalytics,o=t.seasonal,c=t.placeholder,d=t.name,f=t.showDisclaimerToggle,p=t.area,h=t.inFocus,m=t.showHotDeal,y=t.showWasPrice,b=t.models,w=t.reviews,_=t.loadMore,k=t.showPrice,S=t.showReviewsPosition,P=t.showShipping,x=this.state,D=x.toggleOpen,C=x.tabs,M=x.activeTab,F=x.loading,z=x.params,E=x.data,A=x.displayType,I=x.selectedFilters,R=x.selectedFilter,N=x.selectedSwitcherItem,V=x.switcherItems,j=x.filters,L=x.Component,G=this.getDefaultRows(),W=this.getDealData();if(M&&M.value){var U=!n||D,B=(z[M.value]||{}).site,X=T.default[A+"-mobile"]&&r<600?A+"-mobile":T.default[A]?A:"container";return v.default.createElement(O,{value:{widgetTitle:s,editorial:l,showWidgetTitle:i,dealData:W,data:E[M.value],tabs:C,showLink:a,width:r,params:z[M.value],activeTab:M,seasonal:o,loading:F,defaultRows:G,displayType:A,sendAnalytics:u,reviews:w,placeholder:c,name:d,selectedFilters:I[M.value],selectedFilter:R,showDisclaimerToggle:f,selectedSwitcherItem:N,switcherItems:V,filters:j[M.value],sortOptions:this.getSortOptions(),site:B,area:p,inFocus:h,showHotDeal:m,showWasPrice:y,showPrice:k,showReviewsPosition:S,loadMore:_,showShipping:P,toggleStatus:D,showPoweredBy:!l,models:b,toggleClick:this.clickToggle.bind(this),loadMoreDeals:this.loadMoreDeals.bind(this),resetDeals:this.resetDeals.bind(this),changeTab:this.changeTab.bind(this),changeFilter:this.changeFilter.bind(this),toggleFilterOptions:this.toggleFilterOptions.bind(this),scrollLeft:this.scrollLeft.bind(this),scrollRight:this.scrollRight.bind(this),changeRangeFilter:this.changeRangeFilter.bind(this),updateInputValue:this.updateInputValue.bind(this),useInputValue:this.useInputValue.bind(this),changeSort:this.changeSort.bind(this),getModelSuggestions:this.getModelSuggestions.bind(this),updateModelSuggestionsCallback:this.updateModelSuggestionsCallback.bind(this)}},v.default.createElement("div",{className:T.default[X],ref:function(t){return e.container=t}},n?v.default.createElement(g.default,null):null,U&&L))}return null}}]),t}(v.default.Component);D.propTypes={data:h.default.object.isRequired,retailTabs:h.default.bool,gamePlatformTabs:h.default.bool,seasonal:h.default.string,sendAnalytics:h.default.func,startViewportTracking:h.default.func,setAnalyticsAttribute:h.default.func,sendViewedEvent:h.default.bool,getDealData:h.default.func,params:h.default.object,area:h.default.string,showLink:h.default.bool,width:h.default.number,showToggle:h.default.bool,editorial:h.default.bool,widgetTitle:h.default.string,showWidgetTitle:h.default.bool,endpoint:h.default.string,displayType:h.default.string,placeholder:h.default.object,name:h.default.string,showDisclaimerToggle:h.default.bool,inFocus:h.default.bool,showHotDeal:h.default.bool,showPrice:h.default.bool,showWasPrice:h.default.string,getJSON:h.default.func,models:h.default.object,loadMore:h.default.bool,showShipping:h.default.bool,getChildren:h.default.func,reviews:h.default.array,showReviewsPosition:h.default.string},t.default=D;var C=v.default.createContext(),O=C.Provider,M=C.Consumer;t.Provider=O,t.Consumer=M},429:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t="undefined"!=typeof document&&document.URL.indexOf("dev.")>=0?"https://stage.widgets.fie.future.net.uk/":"https://widgets.future-fie.co.uk/";return"undefined"!=typeof window&&window.hawk_api_endpoint&&window.hawk_api_endpoint.indexOf("stage")>=0&&(t="https://stage.widgets.fie.future.net.uk/"),"undefined"!=typeof document&&document.URL.indexOf("localhost")>=0&&document.URL.indexOf("playground")>=0&&(t="/build/"),t+e}},453:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(a(426)),n=i(a(238)),l=i(a(611)),s=i(a(612));function i(e){return e&&e.__esModule?e:{default:e}}var u=function(e){var t=e.site,a=e.className;if((0,l.default)(t)){var r=s.default[a]?a:"container";return n.default.createElement("div",{className:s.default[r]},n.default.createElement("img",{className:s.default.image,src:(0,l.default)(t),alt:t,draggable:"false"}))}return null};u.propTypes={site:r.default.string,className:r.default.string},t.default=u},513:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(178);t.default=function(e){return(0,r.getAnyNodeWithDataset)(e).dataset}},560:function(e,t,a){"use strict";t.__esModule=!0;var r,n=a(7),l=(r=n)&&r.__esModule?r:{default:r};t.default=l.default||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}},576:function(e,t,a){"use strict";var r=a(577);function n(){}e.exports=function(){function e(e,t,a,n,l,s){if(s!==r){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var a={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return a.checkPropTypes=n,a.PropTypes=a,a}},577:function(e,t,a){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},589:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(a(560)),n=u(a(238)),l=u(a(426)),s=u(a(453)),i=u(a(696));function u(e){return e&&e.__esModule?e:{default:e}}var o=function(e){var t=e.site;return n.default.createElement("div",{className:i.default.container},n.default.createElement("div",{className:i.default.overlay}),n.default.createElement("div",{className:i.default.main},n.default.createElement(s.default,(0,r.default)({site:t},{className:"spinner"}))))};o.propTypes={site:l.default.string},t.default=o},590:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,n=a(116),l=(r=n)&&r.__esModule?r:{default:r};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=(0,l.default)(t).map(function(t){return e.model_info&&e.model_info[t]&&e.model_info[t].name}).filter(function(e){return e}).join(", ");return a&&a.indexOf(",")>=0?a.substring(0,a.lastIndexOf(","))+" and "+a.substring(a.lastIndexOf(",")).replace(", ",""):a||e.title}},611:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,n=a(429),l=(r=n)&&r.__esModule?r:{default:r};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=s(e);return t?(0,l.default)("img/sites/"+t):null};var s=function(){switch((arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toLowerCase()){case"anandtech":return"anandtech.png";case"avnetwork":return"svg/avnetwork.svg";case"cbq":return"svg/cbq.svg";case"dcw":return"digitalcameraworld.png";case"giz":return"svg/gizmodo.svg";case"grd":return"svg/gamesradar.svg";case"guitarworld":return"svg/guitarworld.svg";case"itproportal":return"itproportal.png";case"kot":return"svg/kotaku.svg";case"laptopmag":return"svg/laptopmag.svg";case"lfh":return"svg/lifehacker.svg";case"livescience":return"svg/livescience.svg";case"loudersound":return"svg/loudersound.svg";case"mrd":return"svg/musicradar.svg";case"pcg":return"pcgamer.jpg";case"realhomes":return"svg/realhomes.svg";case"space":return"space.png";case"t3":return"svg/t3.svg";case"techlearning":return"svg/techlearning.svg";case"tomsguide":return"tomsguide.png";case"tomshardware":return"tomshardware.png";case"toptenreviews":return"svg/toptenreviews.svg";case"cyclingnews":return"cyclingnews.png";case"trd":return"svg/techradar.svg";case"whathifi":return"svg/whathifi.svg";default:return null}}},612:function(e,t,a){e.exports={container:"hawk-site-logo-container",image:"hawk-site-logo-image",spinner:"hawk-site-logo-spinner","lazy-load-placeholder":"hawk-site-logo-lazy-load-placeholder"}},696:function(e,t,a){e.exports={container:"hawk-spinner-container",overlay:"hawk-spinner-overlay",main:"hawk-spinner-main",spin:"hawk-spinner-spin"}},794:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,n=a(513),l=(r=n)&&r.__esModule?r:{default:r};t.default=function(e,t){var a=(0,l.default)(e),r=a.value,n=a.filterType,s=a.type,i=a.optionType,u=a.filterKey,o=r;if("multiSelect"===n){var c=[];if(r){var d=t[i]||t[s]||t[u];if(-1===(c=(c=d||"").split(",").filter(function(e){return e})).indexOf(r))c.push(r);else{var f=c.indexOf(r);c.splice(f,1)}}else c=[""];o=c.join(",")}return o}},867:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){var n=r(t=t||[],a=a||{});switch(e){case"left":return t[n-1]?t[n-1]:t[t.length-1];default:return t[n+1]?t[n+1]:t[0]}};var r=function(e,t){var a=0;return e.every(function(e,r){return e!==t||(a=r,!1)}),a}}}]);