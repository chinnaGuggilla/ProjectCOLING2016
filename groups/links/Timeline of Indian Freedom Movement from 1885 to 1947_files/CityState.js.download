/**
 * 
 * @author Narendra Pundir
 * @category DropDown for State and City
 * @created 23-Sep-2016
 */

$(window).load(function() {
	getState(3);
	console.log("State Load!");
});

$(document).ready(function() {
	$("#state").change(function() {
		var stateId = this.value;
		getCity(stateId);
	});
});

function getState(countryId) {
	if (countryId == 'none') {
		countryId = 3;
	}
	$.post('/iw-cc/mmi/Education/jagranjosh/register/State.jsp', {
		countryId : countryId,
		dataType : 'json'
	}, function(responseJson) {
		$.each(responseJson, function(index, item) {
			$('#state').append(
					$('<option></option>').val(item.ID).html(item.NAME));
		});
	});
}

function getCity(stateId) {

	$("#city").attr("disabled", "disabled");

	if (stateId != '-1') {
		$("#city").empty(); 
		$('#city').append($('<option></option>').val("-1").html("City"));
		$.post('/iw-cc/mmi/Education/jagranjosh/register/City.jsp', {
			stateId : stateId,
			dataType : 'json'
		}, function(responseJson) {
			
			$.each(responseJson, function(index, item) {

				$('#city').append(
						$('<option></option>').val(item.ID).html(item.NAME));
			});
			$("#city").removeAttr("disabled");
		});

	} else {

		$('#city')[0].selectedIndex = 0;
		$("#city").attr("disabled", "disabled");

	}
}
